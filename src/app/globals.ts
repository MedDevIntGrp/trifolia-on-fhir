import {Injectable} from '@angular/core';

@Injectable()
export class Globals {
    public fhirDefinedTypes = [
        'Address',
        'Age',
        'Annotation',
        'Attachment',
        'BackboneElement',
        'CodeableConcept',
        'Coding',
        'ContactDetail',
        'ContactPoint',
        'Contributor',
        'Count',
        'DataRequirement',
        'Distance',
        'Dosage',
        'Duration',
        'Element',
        'ElementDefinition',
        'Extension',
        'HumanName',
        'Identifier',
        'MarketingStatus',
        'Meta',
        'Money',
        'Narrative',
        'ParameterDefinition',
        'Period',
        'ProdCharacteristic',
        'ProductShelfLife',
        'Quantity',
        'Range',
        'Ratio',
        'Reference',
        'RelatedArtifact',
        'SampledData',
        'Signature',
        'SimpleQuantity',
        'SubstanceAmount',
        'SubstanceMoiety',
        'Timing',
        'TriggerDefinition',
        'UsageContext',
        'base64Binary',
        'boolean',
        'canonical',
        'code',
        'date',
        'dateTime',
        'decimal',
        'id',
        'instant',
        'integer',
        'markdown',
        'oid',
        'positiveInt',
        'string',
        'time',
        'unsignedInt',
        'uri',
        'url',
        'uuid',
        'xhtml',
        'Account',
        'ActivityDefinition',
        'AdverseEvent',
        'AllergyIntolerance',
        'Appointment',
        'AppointmentResponse',
        'AuditEvent',
        'Basic',
        'Binary',
        'BiologicallyDerivedProduct',
        'BodyStructure',
        'Bundle',
        'CapabilityStatement',
        'CarePlan',
        'CareTeam',
        'ChargeItem',
        'Claim',
        'ClaimResponse',
        'ClinicalImpression',
        'CodeSystem',
        'Communication',
        'CommunicationRequest',
        'CompartmentDefinition',
        'Composition',
        'ConceptMap',
        'Condition',
        'Consent',
        'Contract',
        'Coverage',
        'DetectedIssue',
        'Device',
        'DeviceComponent',
        'DeviceMetric',
        'DeviceRequest',
        'DeviceUseStatement',
        'DiagnosticReport',
        'DocumentManifest',
        'DocumentReference',
        'DomainResource',
        'EligibilityRequest',
        'EligibilityResponse',
        'Encounter',
        'Endpoint',
        'EnrollmentRequest',
        'EnrollmentResponse',
        'EntryDefinition',
        'EpisodeOfCare',
        'EventDefinition',
        'ExampleScenario',
        'ExpansionProfile',
        'ExplanationOfBenefit',
        'FamilyMemberHistory',
        'Flag',
        'Goal',
        'GraphDefinition',
        'Group',
        'GuidanceResponse',
        'HealthcareService',
        'ImagingStudy',
        'Immunization',
        'ImmunizationEvaluation',
        'ImmunizationRecommendation',
        'ImplementationGuide',
        'Invoice',
        'ItemInstance',
        'Library',
        'Linkage',
        'List',
        'Location',
        'Measure',
        'MeasureReport',
        'Media',
        'Medication',
        'MedicationAdministration',
        'MedicationDispense',
        'MedicationKnowledge',
        'MedicationRequest',
        'MedicationStatement',
        'MedicinalProduct',
        'MedicinalProductAuthorization',
        'MedicinalProductClinicals',
        'MedicinalProductDeviceSpec',
        'MedicinalProductIngredient',
        'MedicinalProductPackaged',
        'MedicinalProductPharmaceutical',
        'MessageDefinition',
        'MessageHeader',
        'NamingSystem',
        'NutritionOrder',
        'Observation',
        'ObservationDefinition',
        'OccupationalData',
        'OperationDefinition',
        'OperationOutcome',
        'Organization',
        'OrganizationRole',
        'Parameters',
        'Patient',
        'PaymentNotice',
        'PaymentReconciliation',
        'Person',
        'PlanDefinition',
        'Practitioner',
        'PractitionerRole',
        'Procedure',
        'ProcessRequest',
        'ProcessResponse',
        'ProductPlan',
        'Provenance',
        'Questionnaire',
        'QuestionnaireResponse',
        'RelatedPerson',
        'RequestGroup',
        'ResearchStudy',
        'ResearchSubject',
        'Resource',
        'RiskAssessment',
        'Schedule',
        'SearchParameter',
        'Sequence',
        'ServiceRequest',
        'Slot',
        'Specimen',
        'SpecimenDefinition',
        'StructureDefinition',
        'StructureMap',
        'Subscription',
        'Substance',
        'SubstancePolymer',
        'SubstanceReferenceInformation',
        'SubstanceSpecification',
        'SupplyDelivery',
        'SupplyRequest',
        'Task',
        'TerminologyCapabilities',
        'TestReport',
        'TestScript',
        'UserSession',
        'ValueSet',
        'VerificationResult',
        'VisionPrescription'
    ];
    public tooltips = {
        'resource.id': 'The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.',
        'sd.name': 'A natural language name identifying the structure definition. This name should be usable as an identifier for the module by machine processing applications such as code generation.',
        'sd.url': 'An absolute URI that is used to identify this structure definition when it is referenced in a specification, model, design or an instance; also called its canonical identifier. This SHOULD be globally unique and SHOULD be a literal address at which this structure definition is (or will be) published.',
        'sd.title': 'A short, descriptive, user-friendly title for the structure definition.',
        'sd.date': 'The date (and optionally time) when the structure definition was published. The date must change when the business version changes and it must change if the status code changes. In addition, it should change when the substantive content of the structure definition changes.',
        'sd.publisher': 'The name of the organization or individual that published the structure definition.',
        'sd.description': 'A free text natural language description of the structure definition from a consumer\'s perspective.',
        'sd.version': 'The identifier that is used to identify this version of the structure definition when it is referenced in a specification, model, design or instance. This is an arbitrary value managed by the structure definition author and is not expected to be globally unique. For example, it might be a timestamp (e.g. yyyymmdd) if a managed version is not available. There is also no expectation that versions can be placed in a lexicographical sequence.',
        'sd.status': 'The status of this structure definition. Enables tracking the life-cycle of the content.',
        'sd.experimental': 'A Boolean value to indicate that this structure definition is authored for testing purposes (or education/evaluation/marketing) and is not intended to be used for genuine usage.',
        'ed.representation': 'Codes that define how this element is ' +
            'represented in instances, when the deviation varies from the normal case.',
        'ed.code': 'A code that has the same meaning as the element in a particular terminology.',
        'ed.min': 'The minimum number of times this element SHALL appear in the instance.',
        'ed.max': 'The maximum number of times this element is permitted to appear in the instance.',
        'ed.type': 'The data type or resource that the value of this element is permitted to be.',
        'ed.type.code': 'URL of Data type or Resource that is a(or the) type used for this element. References are URLs that are relative to http://hl7.org/fhir/StructureDefinition e.g. "string" is a reference to http://hl7.org/fhir/StructureDefinition/string. Absolute URLs are only allowed in logical models.',
        'ed.type.profile': 'Identifies a profile structure or implementation Guide that applies to the datatype this element refers to. If any profiles are specified, then the content must conform to at least one of them. The URL can be a local reference - to a contained StructureDefinition, or a reference to another StructureDefinition or Implementation Guide by a canonical URL. When an implementation guide is specified, the type SHALL conform to at least one profile defined in the implementation guide.',
        'ed.type.targetProfile': 'Used when the type is "Reference", and Identifies a profile structure or implementation Guide that applies to the target of the reference this element refers to. If any profiles are specified, then the content must conform to at least one of them. The URL can be a local reference - to a contained StructureDefinition, or a reference to another StructureDefinition or Implementation Guide by a canonical URL. When an implementation guide is specified, the target resource SHALL conform to at least one profile defined in the implementation guide.',
        'ed.type.aggregation': 'If the type is a reference to another resource, how the resource is or can be aggregated - is it a contained resource, or a reference, and if the context is a bundle, is it included in the bundle.',
        'ed.type.versioning': 'Whether this reference needs to be version specific or version independent, or whether either can be used.'
    };

    public toggleProperty(parent, propertyName, defaultValue) {
        if (parent.hasOwnProperty(propertyName)) {
            delete parent[propertyName];
        } else {
            parent[propertyName] = defaultValue;
        }
    }

    public getShortString(theString: string, pre: boolean = true, length: number = 20): string {
        if (theString && theString.length > length) {
            if (pre) {
                return theString.substring(0, length) + '...';
            } else {
                return '...' + theString.substring(theString.length - length);
            }
        }

        return theString;
    }
}
